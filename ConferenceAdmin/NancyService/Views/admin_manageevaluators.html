<div ng-controller="evaluatorCtrl as vm">

    <h3>Manage Evaluators</h3><br>

    <div class="col-lg-12 hide-until-loaded" id="body">

        <h4 class="after-title-field">Pending Applications</h4><br />

        <!-- Show message if the list of evaluators applicants contains zero applications. -->
        <div ng-hide="vm.pendingList.length">
            <p class="after-title-field">There are no applications.</p><br />
        </div>

        <div class="col-lg-12 etable" ng-show="vm.pendingList.length">
            <table ng-table="tableParams" class="table row">
                <tr>
                    <td><b>Name</b></td>
                    <td><b>Email</b></td>
                    <td><b>Update</b></td>
                </tr>
                <tr ng-repeat="evaluator in vm.pendingList">
                    <td>{{evaluator.firstName}} {{evaluator.lastName}}</td>
                    <td>{{evaluator.email}}</td>
                    <td>
                        <!-- DropDown Menu showing available status options. -->
                        <select ng-model="evaluator.optionStatus"
                                ng-options="acceptanceStatus for acceptanceStatus in vm.acceptanceStatusList"></select>
                        <button class="btn btn-ar btn-primary" ng-click="vm.updateAcceptanceStatus(evaluator)">Apply</button>
                    </td>
                </tr>
                <tr><td></td><td></td><td></td></tr>
            </table>
        </div>

        <h4 class="title-field">Evaluators and Past Applications</h4>

        <!-- Show message if the list of evaluators contains zero users. -->
        <div ng-hide="vm.evaluatorsList.length">
            <p class="after-title-field">No evaluators have been added.</p><br />
        </div>

        <!-- Table containing list of evaluators. The table is hidden until the system has retrieved the list. -->
        <div class="pdiv right" ng-show="vm.evaluatorsList.length"><p class="psearch"> Search:</p><input ng-model="vm.searchEvaluator"></div>

        <div class="col-lg-12 etable" id="ebody" ng-show="vm.evaluatorsList.length">

            <table ng-table="tableParams" class="table row">
                <tr>
                    <td><b>Name</b></td>
                    <td><b>Email</b></td>
                    <td><b>Status</b></td>
                    <td><b>Update</b></td>
                </tr>
                <tr ng-repeat="evaluator in vm.evaluatorsList | filter: vm.searchEvaluator">
                    <td>{{evaluator.firstName}} {{evaluator.lastName}}</td>
                    <td>{{evaluator.email}}</td>
                    <td>{{evaluator.acceptanceStatus}}</td>
                    <td>
                        <!-- DropDown Menu showing available status options. -->
                        <select ng-model="evaluator.optionStatus"
                                ng-options="acceptanceStatus for acceptanceStatus in vm.acceptanceStatusList"></select>
                        <button class="btn btn-ar btn-primary" ng-click="vm.updateAcceptanceStatus(evaluator)">Apply</button>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-lg-12">
            <button class="btn btn-ar btn-primary pull" data-toggle="modal" data-target="#addEvaluator">Add Evaluator</button> <a href=""><i class="fa fa-info-circle info-icon" title="Manually add an evaluator"> </i></a>
        </div>
    </div>
    <!-- Loading icon, appearing while table is loading its contents. -->
    <div class="col-lg-12">
        <h3 id="loading-icon"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading</h3>
    </div>

    <!-- Add Evaluators Modal: Input: Email -->
    <div class="modal fade" id="addEvaluator" tabindex="-1" role="dialog" aria-labelledby="addEvaluatorLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="addEvaluatorLabel">Add Evaluator</h4>
                </div>
                <div class="modal-body">
                    <form name="addEvaluatorForm" novalidate>
                        <label>Email:</label>
                        <input id="email" name="email" type="email" ng-model="vm.email" required />
                        <label class="help-inline" ng-show="addEvaluatorForm.email.$invalid && !addEvaluatorForm.email.$pristine">Email is required.</label>
                        <br />
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" ng-click="vm.next()" ng-disabled="addEvaluatorForm.$invalid">Add</button>
                    <button class="btn btn-ar btn-default left" data-dismiss="modal" ng-click="vm.clear()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error: Email not found in the system -->
    <div class="modal fade" id="addError" tabindex="-1" role="dialog" aria-labelledby="addErrorLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="addErrorLabel">Evaluator not added</h4>
                </div>
                <div class="modal-body">
                    <p>
                        The evaluator could not be added:
                        <ul><li>The email provided was not found in the system. Request the evaluator to create an account.</li></ul>
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" data-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error: Already an evaluator -->
    <div class="modal fade" id="addError2" tabindex="-1" role="dialog" aria-labelledby="addError2Label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="addError2Label">Evaluator not added</h4>
                </div>
                <div class="modal-body">
                    <p>
                        The evaluator could not be added.
                        <ul><li>The email you provided belongs to a registered user that is already an evaluator.</li></ul>
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" data-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Confirmation -->
    <div class="modal fade" id="addConfirm" tabindex="-1" role="dialog" aria-labelledby="addConfirmLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="addConfirmLabel">Evaluator Confirmation</h4>
                </div>
                <div class="modal-body">
                    <p>
                        The evaluator has been added.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" data-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Confirmation -->
    <div class="modal fade" id="confirmationEvaluatorAcceptanceChange" tabindex="-1" role="dialog" aria-labelledby="acceptanceLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="acceptanceLabel">Acceptance Status Changed</h4>
                </div>
                <div class="modal-body">
                    The acceptance status has been changed.
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" data-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Error: Unknown. Try again? -->
    <div class="modal fade" id="addError3" tabindex="-1" role="dialog" aria-labelledby="addError3Label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="addError3Label">Evaluator not added</h4>
                </div>
                <div class="modal-body">
                    <p>
                        The evaluator could not be added with the specified privilege. Try again later.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" data-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Error: Unknown. Try again? -->
    <div class="modal fade" id="editError" tabindex="-1" role="dialog" aria-labelledby="editErrorLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="editErrorLabel">Evaluator Status not updated</h4>
                </div>
                <div class="modal-body">
                    <p>
                        The evaluator could not be updated with the specified privilege. Try again later.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ar btn-primary left" data-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>

</div><!--ctrl end-->